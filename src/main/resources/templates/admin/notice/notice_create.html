<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{include/layout}">
<meta charset="UTF-8">
<th:block layout:fragment="content">
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
	<link th:href="@{/css/admin/notice/notice_create.css}" rel="stylesheet" type="text/css">
<section>
<div style="width: 80%; margin: 0 auto;">
    <h1 style="border-bottom: 2px solid #000; padding-bottom: 5px;">공지사항 작성</h1>

    <form id="noticeForm" method="POST" action="/submit-notice">
        <div class="header">
            <label id="titleLabel">제목 :</label>
            <!-- 중요 표시 -->
            <input type="text" id="title" name="title" required>
            <div class="important-box">
                <label>중요</label>
                <input type="checkbox" id="important" name="important" value="1">
            </div>
        </div>

        <div class="info">
            <label>작성자 :</label>
            <input type="text" id="author" name="author" required>
        </div>

        <div class="info">
            <label>작성일자 :</label>
            <input type="date" id="date" name="date" required>
        </div>

        <!-- Quill 에디터 -->
        <div id="editor"></div>

        <div class="buttons">
            <button type="submit" class="confirm-btn">등록</button>
            <button type="button" class="cancel-btn" onclick="window.history.back()">취소</button>
        </div>
    </form>
    </div>
</section>

    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script>
        var toolbarOptions = [
            [{ 'header': [1, 2, false] }],
            ['bold', 'italic', 'underline'],
            ['image'], 
            [{ 'list': 'ordered'}, { 'list': 'bullet' }],
            ['clean']
        ];

        var quill = new Quill('#editor', {
            theme: 'snow',
            modules: {
                toolbar: toolbarOptions
            }
        });

        // 체크박스 상태 변경 시 제목에 빨간색 <중요> 표시
        var checkbox = document.getElementById('important');
        var titleLabel = document.getElementById('titleLabel');

        checkbox.addEventListener('change', function() {
            if (checkbox.checked) {
                titleLabel.innerHTML = '제목 : <span class="important-text"><중요></span>';
            } else {
                titleLabel.innerHTML = '제목 :';
            }
        });

        // 폼 전송 시 추가 작업 (Quill 에디터 내용 처리)
        document.getElementById('noticeForm').addEventListener('submit', function(e) {
            var content = quill.root.innerHTML; 

            // Quill 에디터 내용을 숨겨진 input 필드에 추가
            var hiddenContentInput = document.createElement('input');
            hiddenContentInput.setAttribute('type', 'hidden');
            hiddenContentInput.setAttribute('name', 'content');
            hiddenContentInput.setAttribute('value', content);
            this.appendChild(hiddenContentInput);
        });

    </script>

</th:block>
</html>
