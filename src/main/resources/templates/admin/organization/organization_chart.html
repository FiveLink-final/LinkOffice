<!-- <!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Main Page</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.12/themes/default/style.min.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.12/jstree.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<body>

메인 페이지 내용

버튼을 클릭하면 모달이 열립니다
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#organizationModal">
    조직도 보기
</button>

조직도 모달
<div class="modal fade" id="organizationModal" tabindex="-1" role="dialog" aria-labelledby="organizationModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="organizationModalLabel">조직도</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                조직도 표시할 영역
                <div id="organizationTree"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">닫기</button>
            </div>
        </div>
    </div>
</div>

<script>
    // 모달이 열릴 때 조직도를 로드
    $('#organizationModal').on('shown.bs.modal', function () {
        loadOrganizationChart();
    });

    function loadOrganizationChart() {
        $.ajax({
            url: '/api/organization/structure', // 백엔드 API 경로
            method: 'GET',
            success: function (data) {
                const treeData = buildTreeData(data);
                $('#organizationTree').jstree("destroy").jstree({  // 기존의 jstree를 파괴하고 새로 생성
                    'core': {
                        'data': treeData
                    }
                });
            },
            error: function () {
                alert("조직도를 불러오는 중 오류가 발생했습니다.");
            }
        });
    }

    function buildTreeData(data) {
        let result = [];
        for (let departmentName in data) {
            let department = data[departmentName].department;
            let subDepartments = data[departmentName].subDepartments;
            let members = data[departmentName].members;

            let departmentNode = {
                'text': department.departmentName,
                'children': buildSubTree(subDepartments, members)
            };
            result.push(departmentNode);
        }
        return result;
    }

    function buildSubTree(subDepartments, members) {
        let result = [];

        // 하위 부서 추가
        for (let subDepartment of subDepartments) {
            result.push({
                'text': subDepartment.departmentName,
                'children': buildSubTree(subDepartment.subDepartments, subDepartment.members)
            });
        }

        // 부서에 속한 직원 추가
        for (let member of members) {
            result.push({
                'text': member.memberName
            });
        }

        return result;
    }
</script>

</body>
</html>
 -->